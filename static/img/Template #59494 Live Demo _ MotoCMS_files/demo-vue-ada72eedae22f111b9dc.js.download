(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{385:function(module,__webpack_exports__,__webpack_require__){"use strict";(function($){var _assetsJs_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(11),vue_click_outside__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(380),vue_click_outside__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(vue_click_outside__WEBPACK_IMPORTED_MODULE_1__),_assetsJs_services__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(13);__webpack_exports__.a={name:"blockBuyDropdown",directives:{ClickOutside:vue_click_outside__WEBPACK_IMPORTED_MODULE_1___default.a},data:function(){return{isOpened:!1,locale:"en",listBundles:[],templateInfo:{},listOffers:[],allowedBundles:["template_installation","template_installation_hosting"]}},props:{id:{type:Number,required:!0}},created:function(){var _this=this;this.locale=_assetsJs_core__WEBPACK_IMPORTED_MODULE_0__.d.getValue(this.$store.state,"locale.code","en"),$.ajax({url:"/website-templates/product-page/list",method:"GET",dataType:"json",headers:{"x-moto-uid":window.__moto__.motoUid,"x-moto-locale":window.__moto__.locale.code},data:{locale:this.locale,id:this.id,_rnd:Date.now()},success:function(response){void 0!==response&&void 0!==response.body&&(void 0!==response.body.offers&&(_this.listOffers=response.body.offers),void 0!==response.body.template&&(_this.templateInfo=response.body.template,_this.listBundles.push({name:"Template",discountPrice:_this.templateInfo.discountPrice,regularPrice:_this.templateInfo.regularPrice,uid:"only_template"})),void 0!==response.body.bundles&&0<response.body.bundles.length&&response.body.bundles.map(function(bundle){~_this.allowedBundles.indexOf(bundle.uid)&&_this.listBundles.push(bundle)}))}})},methods:{toggleDropDown:function(){this.isOpened=!this.isOpened},hideDropDown:function(){this.isOpened=!1},onClick:function(key){var _this2=this,bundle=this.listBundles[key],locale=window.__moto__.locale.code;_assetsJs_services__WEBPACK_IMPORTED_MODULE_2__.e.pushEvent({event:"general-event",eventCategory:"Product Add to Cart",eventAction:"Bundles: "+bundle.uid,eventLabel:this.id});var _offers={};null!==this.listOffers&&0<this.listOffers.length&&void 0!==bundle.offers&&0<bundle.offers.length&&bundle.offers.map(function(offerId){_this2.listOffers.map(function(item){if(item.id!==offerId)return!0;_offers[item.id]=void 0===_offers[item.id]?{}:_offers[item.id],_offers[item.id]={id:+item.id,regularPrice:+item.regularPrice,discountPrice:+item.discountPrice,finalPrice:+item.discountPrice,selected:!0}})}),this.cartService.setProduct("templates",this.id,{id:this.id,isExclusive:0,totalPrice:this.templateInfo.regularPrice,regularPrice:this.templateInfo.regularPrice,discountPrice:this.templateInfo.discountPrice,finalPrice:this.templateInfo.discountPrice,offers:_offers},{needUpdatedOrderStorage:!0,needRecalculateOrder:!0,ajaxRequestSuccessCallback:function(data){var _urlCart="/website-templates/cart/";return"en"!==locale&&(_urlCart="/website-templates/"+locale+"/cart/"),window.location.href=_urlCart,!1}})}},i18n:{messages:{en:{"Buy now":"Buy Now"},ru:{"Buy now":"Купить"},de:{"Buy now":"Zur Kasse"},es:{"Buy now":"Comprar"},pl:{"Buy now":"Kupić"}}}}}).call(this,__webpack_require__(0))},418:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var store=__webpack_require__(369),vue_esm=__webpack_require__(362),mixins=__webpack_require__(361),cart=__webpack_require__(370),favorites=__webpack_require__(371),changeLocale=__webpack_require__(372),logout=__webpack_require__(373),services=__webpack_require__(13),i18n=__webpack_require__(374),core=__webpack_require__(11),liveDemo_blockBuyDropdownvue_type_script_lang_js_=__webpack_require__(385).a,componentNormalizer=__webpack_require__(360),blockBuyDropdown=Object(componentNormalizer.a)(liveDemo_blockBuyDropdownvue_type_script_lang_js_,function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:_vm.hideDropDown,expression:"hideDropDown"}],staticClass:"buy",class:{act:this.isOpened},on:{click:_vm.toggleDropDown}},[_c("div",{staticClass:"title"},[_vm._v(_vm._s(_vm.$t("Buy now")))]),_vm._v(" "),0<this.listBundles.length&&this.isOpened?_c("div",{staticClass:"drop"},[_c("ul",_vm._l(this.listBundles,function(item,key){return _c("li",{on:{click:function($event){return _vm.onClick(key)}}},[_c("div",{staticClass:"item-el"},[_c("div",{staticClass:"text"},[_vm._v(_vm._s(item.name))]),_vm._v(" "),_c("div",{staticClass:"price",class:{has_discount:+item.regularPrice>+item.discountPrice}},[_c("span",{staticClass:"old_price"},[_vm._v(_vm._s(_vm.$n(item.regularPrice,"currencyNoCents")))]),_vm._v(" "),_c("span",{staticClass:"current_price"},[_vm._v(_vm._s(_vm.$n(item.discountPrice,"currencyNoCents")))])])])])}),0)]):_vm._e()])},[],!1,null,null,null).exports,popups=__webpack_require__(367),notices=__webpack_require__(368);vue_esm.a.config.devtools=!1,vue_esm.a.config.performance=!1;var cartService=new services.c;cartService.setCartStore(window.__moto__.cart.full),cartService.setExternalStorageStore(window.__moto__.cart.order),vue_esm.a.prototype.cartService=cartService,vue_esm.a.prototype._businessTrackerMOTO=window._businessTrackerMOTO;new vue_esm.a({el:"#app",store:store.a,i18n:i18n.a,mixins:[mixins.a],components:{Popups:popups.a,Logout:logout.a,Notices:notices.a,CounterCart:cart.a,CounterFavorites:favorites.a,ChangeLocaleNotice:changeLocale.a,BlockBuyDropdown:blockBuyDropdown},created:function(){core.b.dispatch({eventName:"moto:vue:created"})}})}}]);